<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Youth Online</title>
<style>
body {
    margin: 0;
    background: black;
    overflow: hidden;
}
#gameCanvas {
    background: #222;
    display: block;
    margin: 0 auto;
    width: 100vw;
    height: 70vh;
}
#joystick {
    position: fixed;
    bottom: 50px;
    left: 50px;
    width: 100px;
    height: 100px;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
    touch-action: none;
}
#stick {
    width: 40px;
    height: 40px;
    background: rgba(255,255,255,0.4);
    border-radius: 50%;
    position: absolute;
    left: 30px;
    top: 30px;
}
#autoBtn {
    position: fixed;
    bottom: 50px;
    right: 50px;
    padding: 10px 20px;
    background: yellow;
    border: none;
    border-radius: 10px;
    font-size: 18px;
}
</style>
</head>
<body>

<canvas id="gameCanvas"></canvas>
<div id="joystick">
    <div id="stick"></div>
</div>
<button id="autoBtn">AUTO</button>

<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight * 0.7;

let player = { x: canvas.width/2, y: canvas.height/2, size: 20, color: "red" };
let autoMove = false;
let joystick = document.getElementById("joystick");
let stick = document.getElementById("stick");

let joyActive = false;
let startX, startY;
let joyCenterX = joystick.offsetLeft + joystick.offsetWidth / 2;
let joyCenterY = joystick.offsetTop + joystick.offsetHeight / 2;

function drawPlayer() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    ctx.beginPath();
    ctx.arc(player.x, player.y, player.size, 0, Math.PI * 2);
    ctx.fillStyle = player.color;
    ctx.fill();
}

function gameLoop() {
    if (autoMove) {
        player.x += 2;
        if (player.x > canvas.width) player.x = 0;
    }
    drawPlayer();
    requestAnimationFrame(gameLoop);
}
gameLoop();

joystick.addEventListener("touchstart", e => {
    joyActive = true;
    let touch = e.touches[0];
    startX = touch.clientX;
    startY = touch.clientY;
    joystick.style.left = `${startX - 50}px`;
    joystick.style.top = `${startY - 50}px`;
    joyCenterX = startX;
    joyCenterY = startY;
});

joystick.addEventListener("touchmove", e => {
    if (!joyActive) return;
    let touch = e.touches[0];
    let dx = touch.clientX - joyCenterX;
    let dy = touch.clientY - joyCenterY;
    let dist = Math.min(Math.sqrt(dx*dx + dy*dy), 40);
    let angle = Math.atan2(dy, dx);

    stick.style.left = `${30 + dist * Math.cos(angle)}px`;
    stick.style.top = `${30 + dist * Math.sin(angle)}px`;

    player.x += Math.cos(angle) * 2;
    player.y += Math.sin(angle) * 2;
});

joystick.addEventListener("touchend", () => {
    joyActive = false;
    stick.style.left = "30px";
    stick.style.top = "30px";
});

document.getElementById("autoBtn").addEventListener("click", () => {
    autoMove = !autoMove;
    document.getElementById("autoBtn").style.background = autoMove ? "green" : "yellow";
});
</script>

</body>
</html>
